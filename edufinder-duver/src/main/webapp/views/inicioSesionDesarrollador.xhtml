<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xml:lang="es"
      lang="es">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inicio de Sesión - EduFinder</title>
    <link rel="stylesheet" type="text/css" href="../css/diseñoInicioSesionDesarrollador.css" />
    <script type="text/javascript">
        // Función para inicializar usuarios en localStorage
        function inicializarUsuarios() {
            if (!localStorage.getItem('usuariosInicializados')) {
                var usuarios = [
                    // 3 Desarrolladores
                    {tipo: 'desarrollador', username: 'dev1', email: 'dev1@edufinder.com', password: 'dev123', nombre: 'Carlos Méndez', especialidad: 'Desarrollo Frontend'},
                    {tipo: 'desarrollador', username: 'dev2', email: 'dev2@edufinder.com', password: 'dev123', nombre: 'Ana López', especialidad: 'Desarrollo Backend'},
                    {tipo: 'desarrollador', username: 'dev3', email: 'dev3@edufinder.com', password: 'dev123', nombre: 'Jorge Ramírez', especialidad: 'Base de Datos'},
                    
                    // 5 Profesionales
                    {tipo: 'profesional', username: 'pro1', email: 'pro1@edufinder.com', password: 'pro123', nombre: 'María Rodríguez', especialidad: 'Ingeniería de Sistemas'},
                    {tipo: 'profesional', username: 'pro2', email: 'pro2@edufinder.com', password: 'pro123', nombre: 'David Gómez', especialidad: 'Medicina'},
                    {tipo: 'profesional', username: 'pro3', email: 'pro3@edufinder.com', password: 'pro123', nombre: 'Laura Morales', especialidad: 'Derecho'},
                    {tipo: 'profesional', username: 'pro4', email: 'pro4@edufinder.com', password: 'pro123', nombre: 'Pedro Silva', especialidad: 'Psicología'},
                    {tipo: 'profesional', username: 'pro5', email: 'pro5@edufinder.com', password: 'pro123', nombre: 'Carmen Torres', especialidad: 'Economía'},
                    
                    // 8 Universidades
                    {tipo: 'universidad', username: 'uni1', email: 'uni1@edufinder.com', password: 'uni123', nombre: 'Universidad Nacional', ubicacion: 'Bogotá'},
                    {tipo: 'universidad', username: 'uni2', email: 'uni2@edufinder.com', password: 'uni123', nombre: 'Universidad de los Andes', ubicacion: 'Bogotá'},
                    {tipo: 'universidad', username: 'uni3', email: 'uni3@edufinder.com', password: 'uni123', nombre: 'Universidad Javeriana', ubicacion: 'Cali'},
                    {tipo: 'universidad', username: 'uni4', email: 'uni4@edufinder.com', password: 'uni123', nombre: 'Universidad del Rosario', ubicacion: 'Bogotá'},
                    {tipo: 'universidad', username: 'uni5', email: 'uni5@edufinder.com', password: 'uni123', nombre: 'Universidad Externado', ubicacion: 'Bogotá'},
                    {tipo: 'universidad', username: 'uni6', email: 'uni6@edufinder.com', password: 'uni123', nombre: 'Universidad del Valle', ubicacion: 'Cali'},
                    {tipo: 'universidad', username: 'uni7', email: 'uni7@edufinder.com', password: 'uni123', nombre: 'Universidad EAFIT', ubicacion: 'Medellín'},
                    {tipo: 'universidad', username: 'uni8', email: 'uni8@edufinder.com', password: 'uni123', nombre: 'Universidad Industrial de Santander', ubicacion: 'Bucaramanga'}
                ];
                
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
                localStorage.setItem('usuariosInicializados', 'true');
            }
        }
        
        function iniciarSesion() {
            var username = document.getElementById('loginForm:login-username').value;
            var email = document.getElementById('loginForm:login-email').value;
            var password = document.getElementById('loginForm:login-password').value;

            var usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];

            var usuario = usuarios.find(function(u) {
                return (u.username === username || u.email === email) &amp;&amp; u.password === password;
            });

            if (usuario) {
                localStorage.setItem('usuarioActual', JSON.stringify(usuario));
                alert('Inicio de sesión exitoso. Bienvenido ' + usuario.nombre);
                
                switch(usuario.tipo) {
                    case 'desarrollador':
                        window.location.href = 'inicioDesarrollador.xhtml';
                        break;
                    case 'profesional':
                        window.location.href = 'inicioDesarrollador.xhtml';
                        break;
                    case 'universidad':
                        window.location.href = 'inicioDesarrollador.xhtml';
                        break;
                    default:
                        window.location.href = 'inicioDesarrollador.xhtml';
                }
            } else {
                alert('Nombre de usuario, correo o contraseña incorrectos.');
            }
        }
    </script>
</h:head>

<h:body onload="inicializarUsuarios()">
    <h:form id="loginForm">
        <div class="container">
            <h2>Inicio de Sesión</h2>

            <div class="form-group">
                <label for="loginForm:login-username">Nombre de Usuario</label>
                <h:inputText id="login-username" styleClass="form-control" required="true" />
            </div>

            <div class="form-group">
                <label for="loginForm:login-email">Correo Electrónico</label>
                <h:inputText id="login-email" styleClass="form-control" required="true" />
            </div>

            <div class="form-group">
                <label for="loginForm:login-password">Contraseña</label>
                <h:inputSecret id="login-password" styleClass="form-control" required="true" />
            </div>

            <button type="button" class="btn" onclick="iniciarSesion()">Iniciar Sesión</button>
            
        </div>
    </h:form>
</h:body>
</html>